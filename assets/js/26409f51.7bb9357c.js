"use strict";(self.webpackChunkdaily_report_hub=self.webpackChunkdaily_report_hub||[]).push([[5016],{8453:(e,o,n)=>{n.d(o,{R:()=>a,x:()=>s});var t=n(6540);const r={},i=t.createContext(r);function a(e){const o=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:o},e.children)}},9271:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>d,contentTitle:()=>s,default:()=>_,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"2025/week-33_2025-08-18_to_2025-08-24/2025-08-20/daily-report-hub_dev/daily_code_diff","title":"\ud83d\udcbb Daily Code Changes","description":"","source":"@site/activities/2025/week-33_2025-08-18_to_2025-08-24/2025-08-20/daily-report-hub_dev/daily_code_diff.md","sourceDirName":"2025/week-33_2025-08-18_to_2025-08-24/2025-08-20/daily-report-hub_dev","slug":"/2025/week-33_2025-08-18_to_2025-08-24/2025-08-20/daily-report-hub_dev/daily_code_diff","permalink":"/Sunwood-ai-labs_daily-report-hub-ii/docs/2025/week-33_2025-08-18_to_2025-08-24/2025-08-20/daily-report-hub_dev/daily_code_diff","draft":false,"unlisted":false,"editUrl":"https://github.com/sunwood-ai-labs/daily-report-hub/tree/main/activities/2025/week-33_2025-08-18_to_2025-08-24/2025-08-20/daily-report-hub_dev/daily_code_diff.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"daily-report-hub_dev","permalink":"/Sunwood-ai-labs_daily-report-hub-ii/docs/2025/week-33_2025-08-18_to_2025-08-24/2025-08-20/daily-report-hub_dev/"},"next":{"title":"\ud83d\udcdd Daily Commits","permalink":"/Sunwood-ai-labs_daily-report-hub-ii/docs/2025/week-33_2025-08-18_to_2025-08-24/2025-08-20/daily-report-hub_dev/daily_commits"}}');var r=n(4848),i=n(8453);const a={},s="\ud83d\udcbb Daily Code Changes",d={},c=[];function l(e){const o={code:"code",h1:"h1",header:"header",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.header,{children:(0,r.jsx)(o.h1,{id:"-daily-code-changes",children:"\ud83d\udcbb Daily Code Changes"})}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-diff",children:'diff --git a/.forgejo/scripts/calculate-week-info.sh b/.forgejo/scripts/calculate-week-info.sh\nindex 6bccc1b..253ca59 100644\n--- a/.forgejo/scripts/calculate-week-info.sh\n+++ b/.forgejo/scripts/calculate-week-info.sh\n@@ -8,7 +8,7 @@ set -e\n WEEK_START_DAY=${1:-1}  # \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u6708\u66dc\u65e5\n \n # \u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u3068\u65e5\u4ed8\u3092\u53d6\u5f97\n-REPO_NAME=${FORGEJO_REPO_NAME}\n+REPO_NAME=${GITHUB_REPOSITORY##*/}\n DATE=$(date \'+%Y-%m-%d\')\n YEAR=$(date \'+%Y\')\n \ndiff --git a/.forgejo/scripts/sync-to-hub-fj.sh b/.forgejo/scripts/sync-to-hub-fj.sh\nindex a3abce9..0211d0e 100644\n--- a/.forgejo/scripts/sync-to-hub-fj.sh\n+++ b/.forgejo/scripts/sync-to-hub-fj.sh\n@@ -120,17 +120,21 @@ PR_BODY="## \ud83d\udcca \u30c7\u30a4\u30ea\u30fc\u30ec\u30dd\u30fc\u30c8\u540c\u671f\n *Forfejo Actions \u306b\u3088\u308a\u81ea\u52d5\u751f\u6210\uff08YUKIHIKO\u6a29\u9650\uff09*"\n \n echo "\ud83d\udcdd YUKIHIKO\u30a2\u30ab\u30a6\u30f3\u30c8\u3067PR\u4f5c\u6210\u4e2d..."\n+\n+# jq \u3092\u4f7f\u3063\u3066\u5b89\u5168\u306bJSON\u30da\u30a4\u30ed\u30fc\u30c9\u3092\u751f\u6210\n+JSON_PAYLOAD=$(jq -n \\\n+  --arg title "$COMMIT_MESSAGE" \\\n+  --arg body "$PR_BODY" \\\n+  --arg head "$BRANCH_NAME" \\\n+  --arg base "main" \\\n+  \'{title: $title, body: $body, head: $head, base: $base}\')\n+\n # Forfejo API\u3067PR\u4f5c\u6210\n PR_RESPONSE=$(curl -s -X POST \\\n   -H "Authorization: token ${PR_CREATOR_TOKEN}" \\\n   -H "Content-Type: application/json" \\\n   "${FORGEJO_API_URL}/repos/${REPORT_HUB_REPO}/pulls" \\\n-  -d "{\n-    \\"title\\": \\"${COMMIT_MESSAGE}\\",\n-    \\"body\\": \\"${PR_BODY}\\",\n-    \\"head\\": \\"${BRANCH_NAME}\\",\n-    \\"base\\": \\"main\\"\n-  }")\n+  -d "$JSON_PAYLOAD")\n \n PR_NUMBER=$(echo "${PR_RESPONSE}" | jq -r \'.number // empty\')\n PR_URL=$(echo "${PR_RESPONSE}" | jq -r \'.html_url // empty\')\ndiff --git a/.forgejo/workflows/sync-to-report.yml b/.forgejo/workflows/sync-to-report.yml\nindex f0591fd..427a146 100644\n--- a/.forgejo/workflows/sync-to-report.yml\n+++ b/.forgejo/workflows/sync-to-report.yml\n@@ -9,7 +9,7 @@ env:\n   # Forfejo\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u8a2d\u5b9a\n   FORGEJO_HOST: "192.168.0.131:3000"\n   FORGEJO_API_URL: "http://192.168.0.131:3000/api/v1"\n-  REPORT_HUB_REPO: "Sunwood-ai-labs/daily-report-hub.git" # Forfejo\u4e0a\u306e\u30ea\u30dd\u30b8\u30c8\u30ea (\u4f8b)\n+  REPORT_HUB_REPO: "Sunwood-ai-labs/daily-report-hub" # Forfejo\u4e0a\u306e\u30ea\u30dd\u30b8\u30c8\u30ea (\u4f8b)\n \n   # \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u8a2d\u5b9a\n   WEEK_START_DAY: 1\n'})})]})}function _(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);